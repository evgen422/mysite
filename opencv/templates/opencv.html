{% extends 'base.html' %}
{% load widget_tweaks %}
{% load static %}
{% block content %}
<form method="post">
    {% csrf_token %}
</form>
<!DOCTYPE html>
<html>
    <head>
        <title>OpenCV Video Stream</title>
    </head>
    <body>
        <h1>OpenCV Video Stream</h1>
        <img src="{% url 'video_feed' %}" />
    </body>
</html>

<script type="text/javascript">
  function sendPing() {
    $.ajax({
      type: "POST",
      url: "{% url 'ping' %}",
      data: { 
        'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
        'ping': 'ping'
      }
    });
  }

  // Call sendPing() every 10 seconds
  setInterval(sendPing, 10000);
</script>

{% endblock %}